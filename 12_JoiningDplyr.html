<!DOCTYPE html>
<html lang="en"><head>
<script src="12_JoiningDplyr_files/libs/clipboard/clipboard.min.js"></script>
<script src="12_JoiningDplyr_files/libs/quarto-html/tabby.min.js"></script>
<script src="12_JoiningDplyr_files/libs/quarto-html/popper.min.js"></script>
<script src="12_JoiningDplyr_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="12_JoiningDplyr_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="12_JoiningDplyr_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="12_JoiningDplyr_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="12_JoiningDplyr_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.353">

  <meta name="author" content="Silvie Cinková">
  <meta name="dcterms.date" content="2025-08-09">
  <title>Joining several data frames with dplyr</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="12_JoiningDplyr_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="12_JoiningDplyr_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="12_JoiningDplyr_files/libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="atrium.css">
  <link href="12_JoiningDplyr_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="12_JoiningDplyr_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="12_JoiningDplyr_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="12_JoiningDplyr_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Joining several data frames with <code>dplyr</code></h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Silvie Cinková 
</div>
</div>
</div>

  <p class="date">2025-08-09</p>
</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Table of contents</h2>
<ul>
<li><a href="#/join-tables-by-a-shared-column" id="/toc-join-tables-by-a-shared-column">Join tables by a shared column</a></li>
<li><a href="#/revision-performed-by-a-user" id="/toc-revision-performed-by-a-user">Revision performed by a user</a></li>
<li><a href="#/gapminder" id="/toc-gapminder"><code>gapminder</code></a></li>
<li><a href="#/geo" id="/toc-geo"><code>geo</code></a></li>
<li><a href="#/countries-in-geo-vs.-gapminder" id="/toc-countries-in-geo-vs.-gapminder">Countries in <code>geo</code> vs.&nbsp;<code>gapminder</code></a></li>
<li><a href="#/little-overlap-in-key-column-values" id="/toc-little-overlap-in-key-column-values">Little overlap in key column values?</a></li>
<li><a href="#/control-key-selection" id="/toc-control-key-selection">Control key selection</a></li>
<li><a href="#/gapminder-europe-2007" id="/toc-gapminder-europe-2007"><code>gapminder</code> Europe 2007</a></li>
<li><a href="#/european-subset-of-geo" id="/toc-european-subset-of-geo">European subset of <code>geo</code></a></li>
<li><a href="#/preferred-gapminder-intersection" id="/toc-preferred-gapminder-intersection">Preferred <code>gapminder</code>, intersection</a></li>
<li><a href="#/keep-gapminder-intact-no-matter-what." id="/toc-keep-gapminder-intact-no-matter-what.">Keep <code>gapminder</code> intact, no matter what.</a></li>
<li><a href="#/which-is-missing" id="/toc-which-is-missing">Which is missing?</a></li>
<li><a href="#/focus-on-geo_europe" id="/toc-focus-on-geo_europe">Focus on <code>geo_europe</code></a></li>
<li><a href="#/mismatches-in-geo_europe" id="/toc-mismatches-in-geo_europe">Mismatches in <code>geo_europe</code></a></li>
<li><a href="#/get-what-you-can" id="/toc-get-what-you-can">Get what you can</a></li>
<li><a href="#/anti_join-detects-mismatches-instantly" id="/toc-anti_join-detects-mismatches-instantly"><code>anti_join</code> detects mismatches instantly</a></li>
<li><a href="#/anti_join-the-other-way-round" id="/toc-anti_join-the-other-way-round"><code>anti_join</code> the other way round</a></li>
<li><a href="#/semi_join-detects-matches" id="/toc-semi_join-detects-matches"><code>semi_join</code> detects matches</a></li>
<li><a href="#/when-your-observations-are-not-unique" id="/toc-when-your-observations-are-not-unique">When your observations are not unique</a></li>
<li><a href="#/the-two-tibbles-math" id="/toc-the-two-tibbles-math">The two tibbles: math</a></li>
<li><a href="#/the-two-tibbles-social-sciences" id="/toc-the-two-tibbles-social-sciences">The two tibbles: social sciences</a></li>
<li><a href="#/possible-rescue-unique-by-several-columns" id="/toc-possible-rescue-unique-by-several-columns">Possible rescue: unique by several columns</a></li>
<li><a href="#/no-chance-to-join" id="/toc-no-chance-to-join">No chance to join</a></li>
<li><a href="#/dplyrjoin-help" id="/toc-dplyrjoin-help"><code>dplyr::join</code> help</a></li>
<li><a href="#/data-with-typos-in-the-key-columns" id="/toc-data-with-typos-in-the-key-columns">Data with typos in the key column(s)</a></li>
<li><a href="#/jrc-names" id="/toc-jrc-names">JRC Names</a></li>
<li><a href="#/jrc-person-names" id="/toc-jrc-person-names">JRC Person Names</a></li>
<li><a href="#/jrc-each-table" id="/toc-jrc-each-table">JRC each table</a></li>
<li><a href="#/matching-on-levenschtein-distance" id="/toc-matching-on-levenschtein-distance">Matching on Levenschtein Distance</a></li>
<li><a href="#/matching-on-cosine-distance-between-qgrams" id="/toc-matching-on-cosine-distance-between-qgrams">Matching on cosine distance between qgrams</a></li>
<li><a href="#/matching-on-jaccard-distance" id="/toc-matching-on-jaccard-distance">Matching on Jaccard distance</a></li>
</ul>
</nav>
</section>
<section id="join-tables-by-a-shared-column" class="title-slide slide level1 center">
<h1>Join tables by a shared column</h1>

<img data-src="images_ATRIUM/SQL-table-schema-showing-the-relations-between-the-tables-in-the-complete-editing_W640.jpg" class="r-stretch"><aside class="notes">
<ul>
<li><p>Relational databases: tables connected by shared columns. Useful with big datasets evolving in time, in separate places, etc. Two main assets:</p>
<ol type="1">
<li>A change propagates automatically to all places where relevant</li>
<li>On-demand tables generated by queries (variability depends on how smart the connections between tables are).</li>
</ol></li>
<li><p>The figure models how Wikipedia administrators record the history of edits in a relational database. Each of the squares represents one table. The rows represents columns with their names. So, the top right table named <code>page</code> lists one Wikipedia page in each row. Its columns are called <code>id</code>, <code>title</code>, <code>namespace</code>, <code>creation\_date</code>, <code>last\_edit\_date</code>, and <code>total\_edits</code>. In the <code>pagecategory</code> table, each observation is a combination of the ID of a page and a Wikipedia category. These two tables are connected with a red arrow. It matters which table columns (which look as rows here in this scheme) these arrows exactly connect.</p></li>
<li><p>The rows at the start and end of the arrows form a pair. They can have different names, but they describe the same thing in the data. Here these are page IDs. In the <code>pages</code> table, the <code>id</code> column is unique for each observation. It is the <strong>primary key</strong> of this table. Whenever I want to relate another table to this one, I must include a column with the page IDs. In each of these tables, the column of the related page IDs is called <strong>foreign key</strong>. The foreign key values need not bee unique. In our context, each page can be in multiple Wikipedia categories at the same time (e.g.&nbsp;“capitals”, “cities”, and “administration units”). If the page were about Prague, which is a capital and hence a city and administration unit, the ID of the Prague page would occur three times in the <code>pageincategory</code> table. The relation holds also the other way round: one category can describe many pages. In real database schemes, you would see different types of arrows that would tell you exactly how many source items can connect to how many target items. This figure does not quite follow this notation, so we can only tell by common sense.</p></li>
</ul>
<p>When you want to get a table of titles of the pages and the names of the categories they belong to, you call a function that connects matching rows from the both tables by matching together the values of the primary key and the foreign key. By this way, you do not need to worry about how the rows are arranged in either table.</p>
<p>Designing the architecture of a relational database is a skill in its own right. You need not know exactly how to design a relational database, but you will often need to connect tables from sources that are formed so.</p>
<p>I have adopted this image from this academic paper: <a href="https://arxiv.org/pdf/1512.03523" class="uri">https://arxiv.org/pdf/1512.03523</a>. I have corrected the yellow arrow from <code>userincategory</code> to <code>category</code> to point from <code>category_id</code> instead of from <code>user_id</code>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="revision-performed-by-a-user" class="title-slide slide level1 center">
<h1>Revision performed by a user</h1>

<img data-src="images_ATRIUM/SQL-revision-user.jpg" class="r-stretch"><aside class="notes">
<p>You can even look up things within one single table: look at the <code>revision</code> table: <code>parentid</code>: the id of the previous revision - to look up on a different row in the same table. I guess that a parent revision is simply the revision event immediately preceding in time.</p>
<ul>
<li>Revision table with columns <code>id</code>, <code>page_id</code>, <code>user_id</code>,<code>timestamp</code>, , <code>parentid</code>,<code>text</code>.</li>
<li>primary key: unique <code>id</code> of each revision.</li>
<li><code>page_id</code> foreign key - turquoise arrow leads to a <em>page</em> table, to its primary key (probably called <code>id</code> but potentially anything else)</li>
<li><code>user_id</code> foreign key - purple arrow leads to a <em>user</em> table</li>
<li><code>timestamp</code>: when the revision took place</li>
</ul>
<p>The scheme does not say whether the parent revision must be one on the same Wikipedia page or rather one performed by the same user. This would also be a design decision: whether you want to be able to track revision of pages or rather the activities of the users, or both. Anyway, from this table, you can connect to both users and pages, so you can generate a table with titles and names of both for each revision.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="gapminder" class="title-slide slide level1 center">
<h1><code>gapminder</code></h1>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
  country     continent  year lifeExp      pop gdpPercap
  &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
1 Afghanistan Asia       1952    28.8  8425333      779.
2 Afghanistan Asia       1957    30.3  9240934      821.
3 Afghanistan Asia       1962    32.0 10267083      853.</code></pre>
</div>
</div>
<aside class="notes">
<p>You can join tables with <code>dplyr</code>. So far, we have worked quite a lot with diverse tables from Gapminder.org. You correctly anticipate that Gapminder.org stores its data in relational databases. Their tables are made for you to freely combine information across different tables.</p>
<p>In this session, we will enrich our familiar <code>gapminder</code> dataset with additional information from a table of unique countries. We will call that other table <code>geo</code>. This table contains many columns, so we will only select a few to keep this demonstration overseeable.</p>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<aside class="notes">
<p>Did you know that <code>readr</code> allows you to select columns before you even load the data? When you know their names, that is.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</div>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="geo" class="title-slide slide level1 smaller center">
<h1><code>geo</code></h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>geo <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">glue</span>(<span class="st">"https://raw.githubusercontent.com/open-numbers/"</span>,</span>
<span id="cb2-2"><a href="#cb2-2"></a>                     <span class="st">"ddf--gapminder--fasttrack/master/"</span>,</span>
<span id="cb2-3"><a href="#cb2-3"></a>                     <span class="st">"ddf--entities--geo--country.csv"</span>))</span>
<span id="cb2-4"><a href="#cb2-4"></a>geo <span class="ot">&lt;-</span> geo <span class="sc">%&gt;%</span> <span class="fu">select</span>(country, name, main_religion_2008, income_3groups, world_4region)</span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="fu">glimpse</span>(geo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 273
Columns: 5
$ country            &lt;chr&gt; "abkh", "abw", "afg", "ago", "aia", "akr_a_dhe", "a…
$ name               &lt;chr&gt; "Abkhazia", "Aruba", "Afghanistan", "Angola", "Angu…
$ main_religion_2008 &lt;chr&gt; NA, "christian", "muslim", "christian", "christian"…
$ income_3groups     &lt;chr&gt; NA, "high_income", "low_income", "middle_income", N…
$ world_4region      &lt;chr&gt; "europe", "americas", "asia", "africa", "americas",…</code></pre>
</div>
</div>
<aside class="notes">
<p>Now we have a data frame called <code>geo</code>. It lists 273 countries, each only once, and for each country it gives us its dominant religion (snapshot taken in 2008) and to which income group it belongs. The income groups are Gapminder’s own design and obviously refer to the time of creating this dataset. The countries are encoded by their names (column <code>name</code>) and by the abbreviations of these names (column <code>country</code>).</p>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p>The <code>gapminder</code> data frame does not use abbreviations for country names. But even more importantly, its <code>country</code> column does not correspond to <code>country</code> but to <code>name</code> in the <code>geo</code> data frame. This is something to keep in mind when we try to join these two tables!</p>
</div>
</div>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="countries-in-geo-vs.-gapminder" class="title-slide slide level1 smaller center">
<h1>Countries in <code>geo</code> vs.&nbsp;<code>gapminder</code></h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">unique</span>(geo<span class="sc">$</span>name) <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 273</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">unique</span>(gapminder<span class="sc">$</span>country) <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 142</code></pre>
</div>
</div>
<aside class="notes">
<p>When we want to join <code>geo</code> and <code>gapminder</code>, we can apparently use <code>geo</code>’s <code>name</code> and <code>gapminder</code>’s <code>country</code> as the <em>primary key - foreign key</em> pair.</p>
<p>The first question you must ask when you want to join two tables by a pair of keys is how much overlap they have at all. <code>geo</code> contains many more countries than <code>gapminder</code>, so much is clear. But it is not given that all of its countries are listed in <code>geo</code>! Therefore we do this quick check.</p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<aside class="notes">
<p>You could as well call <code>distinct</code> and <code>pull</code> on each, but this base-R way is shorter. It accesses a data frame column as a vector and calls the <code>unique</code> function, which acts on vectors like <code>dplyr::distinct</code> on data frames.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</div>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="little-overlap-in-key-column-values" class="title-slide slide level1 smaller center">
<h1>Little overlap in key column values?</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">setdiff</span>(gapminder<span class="sc">$</span>country, geo<span class="sc">$</span>name) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Korea, Dem. Rep."   "Korea, Rep."        "Swaziland"         
[4] "United Kingdom"     "United States"      "West Bank and Gaza"
[7] "Yemen, Rep."       </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">setdiff</span>(geo<span class="sc">$</span>name, gapminder<span class="sc">$</span>country) <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 138</code></pre>
</div>
</div>
<aside class="notes">
<p><code>setdiff</code> tells you which elements of the first vectors are not in the second vector. We see that the <code>gapminder</code> data frame is not a full subset of the <code>geo</code> data frame. When we enrich <code>gapminder</code> with the information from <code>geo</code>, some values will be missing. This has no programmatic solution. This is your design decision. Drop these seven countries from <code>gapminder</code> because you don’t get the additional information, or live with <code>NA</code>s in the new columns? Or you even find the <code>geo</code> table more important and only want to enrich with <code>gapminder</code>’s <code>pop</code>, <code>lifeExp</code>, and <code>gdpPercap</code> in a given year? For each of your possible decisions, <code>dplyr</code> comes with a dedicated <code>_join</code> function.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="control-key-selection" class="title-slide slide level1 center">
<h1>Control key selection</h1>

<img data-src="images_ATRIUM/joins.png" style="width:50.0%" class="r-stretch"><aside class="notes">
<p>When blue and yellow mix, they give green. This scheme depicts the possible joining outcomes. The yellow area represents the <code>gapminder</code> data, the blue the <code>geo</code> data, and the green area the resulting new table.</p>
<ol type="1">
<li>With <code>inner_join</code> you join just the rows that match in both tables. So you will not have any new empty values.</li>
<li>The <code>left_join</code> and <code>right_join</code> functions are two different perspectives of the same thing, what exactly each does obviously depends on the order in which you feed in the tables. If we always feed <code>gapminder</code> as first (the <code>x</code> argument) and <code>geo</code> second (<code>y</code>), left join will keep all rows in <code>gapminder</code> and match them to <code>geo</code>. We know that seven countries will not be matched, which will result in 7 times 12 rows with <code>NA</code> values in the new columns containing the abbreviation, main religion in 2008, and the income group. The twelve comes from the number of observations (remember, 1952 to 2007, in five-year intervals).</li>
<li>With <code>right_join</code>, we will get a monstrous table of all <code>geo's countries</code>, and the ones that match <code>gapminder</code>, will be matched twelve times each, with a warning for “many-to-many” relations occurring. The new table is going to have four new columns: <code>year</code>, <code>pop</code>, <code>lifeExp</code>, and <code>gdpPercap</code>. They will be filled with <code>NA</code> except in the rows with countries whose names matched across both tables, and the seven countries from <code>gapminder</code> will not appear in the new table.</li>
<li>With <code>full_join</code>, no row will be deleted, but there will be <code>NA</code> in all mismatched rows.</li>
<li>All these tables are going to have the same columns.</li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="gapminder-europe-2007" class="title-slide slide level1 smaller center">
<h1><code>gapminder</code> Europe 2007</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>gapminder_europe <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">"Europe"</span>, year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(continent, year))</span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="fu">glimpse</span>(gapminder_europe)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 30
Columns: 4
$ country   &lt;fct&gt; "Albania", "Austria", "Belgium", "Bosnia and Herzegovina", "…
$ lifeExp   &lt;dbl&gt; 76.423, 79.829, 79.441, 74.852, 73.005, 75.748, 76.486, 78.3…
$ pop       &lt;int&gt; 3600523, 8199783, 10392226, 4552198, 7322858, 4493312, 10228…
$ gdpPercap &lt;dbl&gt; 5937.030, 36126.493, 33692.605, 7446.299, 10680.793, 14619.2…</code></pre>
</div>
</div>
<aside class="notes">
<p>We make a subset of <code>gapminder</code> to keep the data small. Just European countries in 2007 and we drop the columns <code>continent</code> and <code>year</code> because they are all equal.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="european-subset-of-geo" class="title-slide slide level1 smaller center">
<h1>European subset of <code>geo</code></h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>geo_europe <span class="ot">&lt;-</span> geo <span class="sc">%&gt;%</span> <span class="fu">filter</span>(world_4region <span class="sc">==</span> <span class="st">"europe"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="fu">select</span>(<span class="sc">!</span>world_4region)</span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="fu">glimpse</span>(geo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 273
Columns: 5
$ country            &lt;chr&gt; "abkh", "abw", "afg", "ago", "aia", "akr_a_dhe", "a…
$ name               &lt;chr&gt; "Abkhazia", "Aruba", "Afghanistan", "Angola", "Angu…
$ main_religion_2008 &lt;chr&gt; NA, "christian", "muslim", "christian", "christian"…
$ income_3groups     &lt;chr&gt; NA, "high_income", "low_income", "middle_income", N…
$ world_4region      &lt;chr&gt; "europe", "americas", "asia", "africa", "americas",…</code></pre>
</div>
</div>
</section>

<section id="preferred-gapminder-intersection" class="title-slide slide level1 center">
<h1>Preferred <code>gapminder</code>, intersection</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>dplyr<span class="sc">::</span><span class="fu">inner_join</span>(<span class="at">x =</span> gapminder_europe, <span class="at">y =</span> geo_europe, </span>
<span id="cb16-2"><a href="#cb16-2"></a>                  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span> <span class="ot">=</span> <span class="st">"name"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 29 × 7
   country  lifeExp    pop gdpPercap country.y main_religion_2008 income_3groups
   &lt;chr&gt;      &lt;dbl&gt;  &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;              &lt;chr&gt;         
 1 Albania     76.4 3.60e6     5937. alb       muslim             middle_income 
 2 Austria     79.8 8.20e6    36126. aut       christian          high_income   
 3 Belgium     79.4 1.04e7    33693. bel       christian          high_income   
 4 Bosnia …    74.9 4.55e6     7446. bih       &lt;NA&gt;               middle_income 
 5 Bulgaria    73.0 7.32e6    10681. bgr       christian          middle_income 
 6 Croatia     75.7 4.49e6    14619. hrv       christian          high_income   
 7 Czech R…    76.5 1.02e7    22833. cze       christian          high_income   
 8 Denmark     78.3 5.47e6    35278. dnk       christian          high_income   
 9 Finland     79.3 5.24e6    33207. fin       christian          high_income   
10 France      80.7 6.11e7    30470. fra       christian          high_income   
# ℹ 19 more rows</code></pre>
</div>
</div>
<aside class="notes">
<p>We would like to add information from <code>geo</code> to <code>gapminder_europe</code>.</p>
<p>The resulting data frame is going to inherit only the rows with matching country names from both.</p>
<p>The <code>_join</code> functions in <code>dplyr</code> always need a first data frame (<code>x</code>), a second data frame (<code>y</code>), and a vector of column names that provide the key pair(s) in the argument called <code>by</code>. The whole thing reads: “Join <code>x</code> with <code>y</code> by this vector of key pairs.” Each pair contains the name of the key column in <code>x</code> and the name of the corresponding column in <code>y</code>, in exactly this order. Relational databases are designed to answer most queries with just one pair, but sometimes you need several to uniquely identify observations in at least one of the data frames.</p>
<p>Mind the quotes in the column names in <code>by</code>. This time they are mandatory.</p>
<p>There were 30 countries in <code>gapminder_europe</code>, but the resulting data frame has only 29 rows. One country was missing in <code>geo_europe</code>, although it is so much longer than <code>gapminder_europe</code>. We will find out later which. You can see an <code>NA</code> in the fourth row, 6th column. This has nothing to do with joining; it was like this in the original <code>geo_europe</code> data frame.</p>
<p>Look closely at the names of the columns. Can you see <code>country</code> and <code>country.y</code>? The former is from <code>gapminder</code>, the latter from <code>geo_europe</code>. Column names must remain unique, therefore <code>dplyr</code> adds suffixes to duplicate names. Typically, the duplicate column name from the <code>x</code> data frame gets the suffix <code>.x</code> and the other one <code>.y</code>. You can replace them with your own suffixes in the <code>suffix</code> argument. In this case, only the one from the <code>y</code> data frame got the suffix. This is because it was used as a <code>by</code> column. By default, the key column from <code>y</code> disappears and only the <code>x</code> key column stays. You can also fiddle with this in a dedicated argument <code>keep</code>. So, in this case, the <code>x</code> <code>country</code> column stayed, the paired <code>name</code> column from <code>y</code> vanished, and then <code>dplyr</code> spotted another <code>country</code> column among the columns inherited from <code>y</code>. The function is just written in such a way that it does only put the suffix on one, when the other one was used as key. Do not ponder on it, just remember.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="keep-gapminder-intact-no-matter-what." class="title-slide slide level1 smaller center">
<h1>Keep <code>gapminder</code> intact, no matter what.</h1>
<p>One country gets <code>NA</code> in <code>geo_europe</code> columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>dplyr<span class="sc">::</span><span class="fu">left_join</span>(<span class="at">x =</span> gapminder_europe, <span class="at">y =</span> geo_europe,</span>
<span id="cb18-2"><a href="#cb18-2"></a>                 <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span> <span class="ot">=</span> <span class="st">"name"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 7
   country  lifeExp    pop gdpPercap country.y main_religion_2008 income_3groups
   &lt;chr&gt;      &lt;dbl&gt;  &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;              &lt;chr&gt;         
 1 Albania     76.4 3.60e6     5937. alb       muslim             middle_income 
 2 Austria     79.8 8.20e6    36126. aut       christian          high_income   
 3 Belgium     79.4 1.04e7    33693. bel       christian          high_income   
 4 Bosnia …    74.9 4.55e6     7446. bih       &lt;NA&gt;               middle_income 
 5 Bulgaria    73.0 7.32e6    10681. bgr       christian          middle_income 
 6 Croatia     75.7 4.49e6    14619. hrv       christian          high_income   
 7 Czech R…    76.5 1.02e7    22833. cze       christian          high_income   
 8 Denmark     78.3 5.47e6    35278. dnk       christian          high_income   
 9 Finland     79.3 5.24e6    33207. fin       christian          high_income   
10 France      80.7 6.11e7    30470. fra       christian          high_income   
# ℹ 20 more rows</code></pre>
</div>
</div>
</section>

<section id="which-is-missing" class="title-slide slide level1 smaller center">
<h1>Which is missing?</h1>
<ul>
<li>country mismatch <span class="math inline">\(\rightarrow\)</span> <code>is.na(country.y)</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>dplyr<span class="sc">::</span><span class="fu">left_join</span>(<span class="at">x =</span> gapminder_europe, <span class="at">y =</span> geo_europe,</span>
<span id="cb20-2"><a href="#cb20-2"></a>                 <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span> <span class="ot">=</span> <span class="st">"name"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(country.y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 7
  country   lifeExp    pop gdpPercap country.y main_religion_2008 income_3groups
  &lt;chr&gt;       &lt;dbl&gt;  &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;              &lt;chr&gt;         
1 United K…    79.4 6.08e7    33203. &lt;NA&gt;      &lt;NA&gt;               &lt;NA&gt;          </code></pre>
</div>
</div>
</section>

<section id="focus-on-geo_europe" class="title-slide slide level1 smaller center">
<h1>Focus on <code>geo_europe</code></h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>dplyr<span class="sc">::</span><span class="fu">right_join</span>(<span class="at">x =</span> gapminder_europe, <span class="at">y =</span> geo_europe,</span>
<span id="cb22-2"><a href="#cb22-2"></a>                 <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span> <span class="ot">=</span> <span class="st">"name"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 73 × 7
   country  lifeExp    pop gdpPercap country.y main_religion_2008 income_3groups
   &lt;chr&gt;      &lt;dbl&gt;  &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;              &lt;chr&gt;         
 1 Albania     76.4 3.60e6     5937. alb       muslim             middle_income 
 2 Austria     79.8 8.20e6    36126. aut       christian          high_income   
 3 Belgium     79.4 1.04e7    33693. bel       christian          high_income   
 4 Bosnia …    74.9 4.55e6     7446. bih       &lt;NA&gt;               middle_income 
 5 Bulgaria    73.0 7.32e6    10681. bgr       christian          middle_income 
 6 Croatia     75.7 4.49e6    14619. hrv       christian          high_income   
 7 Czech R…    76.5 1.02e7    22833. cze       christian          high_income   
 8 Denmark     78.3 5.47e6    35278. dnk       christian          high_income   
 9 Finland     79.3 5.24e6    33207. fin       christian          high_income   
10 France      80.7 6.11e7    30470. fra       christian          high_income   
# ℹ 63 more rows</code></pre>
</div>
</div>
</section>

<section id="mismatches-in-geo_europe" class="title-slide slide level1 smaller center">
<h1>Mismatches in <code>geo_europe</code></h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>dplyr<span class="sc">::</span><span class="fu">right_join</span>(<span class="at">x =</span> gapminder_europe, <span class="at">y =</span> geo_europe,</span>
<span id="cb24-2"><a href="#cb24-2"></a>                 <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span> <span class="ot">=</span> <span class="st">"name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="#cb24-3"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(lifeExp) <span class="sc">|</span> <span class="fu">is.na</span>(pop) <span class="sc">|</span> <span class="fu">is.na</span>(gdpPercap))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 44 × 7
   country   lifeExp   pop gdpPercap country.y main_religion_2008 income_3groups
   &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;              &lt;chr&gt;         
 1 Abkhazia       NA    NA        NA abkh      &lt;NA&gt;               &lt;NA&gt;          
 2 Akrotiri…      NA    NA        NA akr_a_dhe &lt;NA&gt;               &lt;NA&gt;          
 3 Åland          NA    NA        NA ala       &lt;NA&gt;               &lt;NA&gt;          
 4 Andorra        NA    NA        NA and       christian          high_income   
 5 Armenia        NA    NA        NA arm       christian          middle_income 
 6 Antarcti…      NA    NA        NA ata       &lt;NA&gt;               &lt;NA&gt;          
 7 Azerbaij…      NA    NA        NA aze       muslim             middle_income 
 8 Belarus        NA    NA        NA blr       christian          middle_income 
 9 Channel …      NA    NA        NA chanisl   christian          high_income   
10 Czechosl…      NA    NA        NA cheslo    &lt;NA&gt;               &lt;NA&gt;          
# ℹ 34 more rows</code></pre>
</div>
</div>
<aside class="notes">
<p>We must look for a column that was not in <code>geo_europe</code>. The country column now is the result of <code>country</code> and <code>name</code>, so it will contain all countries from <code>geo_europe</code> but will have dropped <code>United Kingdom</code>, which was only in <code>gapminder_europe</code>. Any of the numeric columns from <code>gapminder</code> will help us though.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="get-what-you-can" class="title-slide slide level1 smaller center">
<h1>Get what you can</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>dplyr<span class="sc">::</span><span class="fu">full_join</span>(<span class="at">x =</span> gapminder_europe, <span class="at">y =</span> geo_europe,</span>
<span id="cb26-2"><a href="#cb26-2"></a>                 <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span> <span class="ot">=</span> <span class="st">"name"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 74 × 7
   country  lifeExp    pop gdpPercap country.y main_religion_2008 income_3groups
   &lt;chr&gt;      &lt;dbl&gt;  &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;              &lt;chr&gt;         
 1 Albania     76.4 3.60e6     5937. alb       muslim             middle_income 
 2 Austria     79.8 8.20e6    36126. aut       christian          high_income   
 3 Belgium     79.4 1.04e7    33693. bel       christian          high_income   
 4 Bosnia …    74.9 4.55e6     7446. bih       &lt;NA&gt;               middle_income 
 5 Bulgaria    73.0 7.32e6    10681. bgr       christian          middle_income 
 6 Croatia     75.7 4.49e6    14619. hrv       christian          high_income   
 7 Czech R…    76.5 1.02e7    22833. cze       christian          high_income   
 8 Denmark     78.3 5.47e6    35278. dnk       christian          high_income   
 9 Finland     79.3 5.24e6    33207. fin       christian          high_income   
10 France      80.7 6.11e7    30470. fra       christian          high_income   
# ℹ 64 more rows</code></pre>
</div>
</div>
<aside class="notes">
<p>The full join is going to contain all country names from both data frames, with NA where they mismatched.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="anti_join-detects-mismatches-instantly" class="title-slide slide level1 smaller center">
<h1><code>anti_join</code> detects mismatches instantly</h1>
<ul>
<li>like <code>setdiff</code> in vectors</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">anti_join</span>(<span class="at">x =</span> gapminder_europe, <span class="at">y =</span> geo_europe,</span>
<span id="cb28-2"><a href="#cb28-2"></a>                 <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span> <span class="ot">=</span> <span class="st">"name"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  country        lifeExp      pop gdpPercap
  &lt;fct&gt;            &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
1 United Kingdom    79.4 60776238    33203.</code></pre>
</div>
</div>
</section>

<section id="anti_join-the-other-way-round" class="title-slide slide level1 smaller center">
<h1><code>anti_join</code> the other way round</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="fu">anti_join</span>( <span class="at">x =</span> geo_europe, <span class="at">y =</span> gapminder_europe,</span>
<span id="cb30-2"><a href="#cb30-2"></a>                 <span class="at">by =</span> <span class="fu">c</span>( <span class="st">"name"</span> <span class="ot">=</span> <span class="st">"country"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 44 × 4
   country   name                  main_religion_2008 income_3groups
   &lt;chr&gt;     &lt;chr&gt;                 &lt;chr&gt;              &lt;chr&gt;         
 1 abkh      Abkhazia              &lt;NA&gt;               &lt;NA&gt;          
 2 akr_a_dhe Akrotiri and Dhekelia &lt;NA&gt;               &lt;NA&gt;          
 3 ala       Åland                 &lt;NA&gt;               &lt;NA&gt;          
 4 and       Andorra               christian          high_income   
 5 arm       Armenia               christian          middle_income 
 6 ata       Antarctica            &lt;NA&gt;               &lt;NA&gt;          
 7 aze       Azerbaijan            muslim             middle_income 
 8 blr       Belarus               christian          middle_income 
 9 chanisl   Channel Islands       christian          high_income   
10 cheslo    Czechoslovakia        &lt;NA&gt;               &lt;NA&gt;          
# ℹ 34 more rows</code></pre>
</div>
</div>
<aside class="notes">
<p><code>anti_join</code>: Filter rows of <code>x</code> that are not matched in <code>y</code>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="semi_join-detects-matches" class="title-slide slide level1 smaller center">
<h1><code>semi_join</code> detects matches</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="fu">semi_join</span>( <span class="at">x =</span> geo_europe, <span class="at">y =</span> gapminder_europe,</span>
<span id="cb32-2"><a href="#cb32-2"></a>                 <span class="at">by =</span> <span class="fu">c</span>( <span class="st">"name"</span> <span class="ot">=</span> <span class="st">"country"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 29 × 4
   country name                   main_religion_2008 income_3groups
   &lt;chr&gt;   &lt;chr&gt;                  &lt;chr&gt;              &lt;chr&gt;         
 1 alb     Albania                muslim             middle_income 
 2 aut     Austria                christian          high_income   
 3 bel     Belgium                christian          high_income   
 4 bgr     Bulgaria               christian          middle_income 
 5 bih     Bosnia and Herzegovina &lt;NA&gt;               middle_income 
 6 che     Switzerland            christian          high_income   
 7 cze     Czech Republic         christian          high_income   
 8 deu     Germany                christian          high_income   
 9 dnk     Denmark                christian          high_income   
10 esp     Spain                  christian          high_income   
# ℹ 19 more rows</code></pre>
</div>
</div>
<aside class="notes">
<p>Filter rows of <code>x</code> that are matched by <code>y</code>. In this context, the countries are going to be the same, no matter in which order you name the data frames, but you will of course get the rows of the one you fed in as <code>x</code>. It can be helpful to look at both sides, especially when you know that you have a lot of <code>NA</code> across the columns of both. If you have to opt for either left or right join, you can at least choose that with less missing data.<br>
</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="when-your-observations-are-not-unique" class="title-slide slide level1 smaller center">
<h1>When your observations are not unique</h1>

</section>

<section id="the-two-tibbles-math" class="title-slide slide level1 smaller center">
<h1>The two tibbles: math</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>maths</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  name         birthplace math_test
  &lt;chr&gt;        &lt;chr&gt;          &lt;dbl&gt;
1 John Smith   Honolulu          72
2 Mary Brown   Milan             40
3 John Smith   Prague            25
4 Helene Field Beijing           91</code></pre>
</div>
</div>
</section>

<section id="the-two-tibbles-social-sciences" class="title-slide slide level1 smaller center">
<h1>The two tibbles: social sciences</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>social_sciences</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  name         birthplace soc_test
  &lt;chr&gt;        &lt;chr&gt;         &lt;dbl&gt;
1 Mary Brown   Milan            12
2 John Smith   Honolulu          5
3 John Smith   Prague           76
4 Helene Field Beijing          49</code></pre>
</div>
</div>
<aside class="notes">
<p>Students’ grades in two courses. You would like to have both exams in the same table. Are the students uniquely identified?</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="possible-rescue-unique-by-several-columns" class="title-slide slide level1 smaller center">
<h1>Possible rescue: unique by several columns</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="fu">left_join</span>(maths, social_sciences, <span class="at">by =</span> (<span class="fu">c</span>(<span class="st">"name"</span>, <span class="st">"birthplace"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  name         birthplace math_test soc_test
  &lt;chr&gt;        &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;
1 John Smith   Honolulu          72        5
2 Mary Brown   Milan             40       12
3 John Smith   Prague            25       76
4 Helene Field Beijing           91       49</code></pre>
</div>
</div>
</section>

<section id="no-chance-to-join" class="title-slide slide level1 smaller center">
<h1>No chance to join</h1>
<p>If you cannot find anything that makes them unique.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>maths2 <span class="ot">&lt;-</span> <span class="fu">select</span>(maths, <span class="sc">-</span>birthplace)</span>
<span id="cb40-2"><a href="#cb40-2"></a>social_sciences2 <span class="ot">&lt;-</span> <span class="fu">select</span>(social_sciences, <span class="sc">!</span>birthplace)</span>
<span id="cb40-3"><a href="#cb40-3"></a><span class="fu">left_join</span>(maths2, social_sciences2, <span class="at">by =</span> <span class="st">"name"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in left_join(maths2, social_sciences2, by = "name"): Detected an unexpected many-to-many relationship between `x` and `y`.
ℹ Row 1 of `x` matches multiple rows in `y`.
ℹ Row 2 of `y` matches multiple rows in `x`.
ℹ If a many-to-many relationship is expected, set `relationship =
  "many-to-many"` to silence this warning.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  name         math_test soc_test
  &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt;
1 John Smith          72        5
2 John Smith          72       76
3 Mary Brown          40       12
4 John Smith          25        5
5 John Smith          25       76
6 Helene Field        91       49</code></pre>
</div>
</div>
<aside class="notes">
<p>Note John Smith occurring four times - all possible combinations get generated.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="dplyrjoin-help" class="title-slide slide level1 center">
<h1><code>dplyr::join</code> help</h1>
<p>explore the arguments</p>
<ul>
<li><p><code>relationship</code></p></li>
<li><p><code>multiple</code></p></li>
<li><p><code>unmatched</code></p></li>
</ul>
</section>

<section id="data-with-typos-in-the-key-columns" class="title-slide slide level1 center">
<h1>Data with typos in the key column(s)</h1>
<ul>
<li><p>libraries <code>fuzzyjoin</code> along with <code>stringdist</code> (used by <code>fuzzyjoin</code>)</p></li>
<li><p>DataCamp course <strong>Intermediate Regular Expressions in R &gt; Similarities Between Strings</strong></p></li>
</ul>
<aside class="notes">
<p>You should only know that there are ways to cope with strings in columns that do not match completely. Only read further if you are particularly interested.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="jrc-names" class="title-slide slide level1 center">
<h1>JRC Names</h1>
<p>Steinberger Ralf, Bruno Pouliquen, Mijail Kabadjov, Jenya Belyaeva &amp; Erik van der Goot (2011).<strong>JRC-Names: A freely available, highly multilingual named entity resource</strong>. Proceedings of the 8th International Conference Recent Advances in Natural Language Processing (RANLP). Hissar, Bulgaria, 12-14 September 2011.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>jrc_1 <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">"datasets_ATRIUM/JRC_Names/jrc_1.tsv"</span>)</span>
<span id="cb43-2"><a href="#cb43-2"></a>jrc_2 <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">"datasets_ATRIUM/JRC_Names/jrc_2.tsv"</span>)</span>
<span id="cb43-3"><a href="#cb43-3"></a>jrc_3 <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">"datasets_ATRIUM/JRC_Names/jrc_3.tsv"</span>)</span>
<span id="cb43-4"><a href="#cb43-4"></a>jrc_4 <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">"datasets_ATRIUM/JRC_Names/jrc_4.tsv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>

<section id="jrc-person-names" class="title-slide slide level1 center">
<h1>JRC Person Names</h1>
<ul>
<li>persons with 4 spellings of their names</li>
<li>2 tables, 20 rows,
<ul>
<li>equal pers IDs, different spelling</li>
</ul></li>
<li>test different fuzzy join metrics</li>
</ul>
<aside class="notes">
<p>Watch the number of rows in inner join. Sensitivity (recall): how many it catches of those to catch: the longer table the better Specificity (precision): how many of those caught were correct (how much noise): check that their ids match.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="jrc-each-table" class="title-slide slide level1 smaller center">
<h1>JRC each table</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>jrc_1 <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>( n, index_id, <span class="fu">starts_with</span>(<span class="st">"PersOrg"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
     id name           
  &lt;dbl&gt; &lt;chr&gt;          
1    41 John+Ashcroft  
2    46 Richard+Boucher
3    56 Adam+Ereli     
4    92 Chris+Patten   
5   123 Dan+Senor      </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>jrc_2 <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(n, index_id, <span class="fu">starts_with</span>(<span class="st">"PersOrg"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
     id name        
  &lt;dbl&gt; &lt;chr&gt;       
1    41 John+Ascroft
2    46 Rick+Boucher
3    56 Adam+J+Ereli
4    92 CHRIS+PATTEN
5   123 Daniel+Senor</code></pre>
</div>
</div>
</section>

<section id="matching-on-levenschtein-distance" class="title-slide slide level1 smaller center">
<h1>Matching on Levenschtein Distance</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>joinJRC_lv <span class="ot">&lt;-</span> fuzzyjoin<span class="sc">::</span><span class="fu">stringdist_inner_join</span>(<span class="at">x =</span> jrc_1, <span class="at">y =</span> jrc_2, </span>
<span id="cb48-2"><a href="#cb48-2"></a><span class="at">distance_col =</span> <span class="st">"distance"</span>, <span class="at">by =</span> <span class="st">"name"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>,</span>
<span id="cb48-3"><a href="#cb48-3"></a><span class="at">method =</span> <span class="st">"lv"</span>,  <span class="at">max_dist =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb48-4"><a href="#cb48-4"></a>  <span class="fu">relocate</span>(name.x, name.y, distance) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(n.x, n.y, index_id.x, <span class="fu">starts_with</span>(<span class="st">"PersOrg"</span>)))</span>
<span id="cb48-5"><a href="#cb48-5"></a>joinJRC_lv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 6
   name.x                  name.y                distance  id.x  id.y index_id.y
   &lt;chr&gt;                   &lt;chr&gt;                    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
 1 John+Ashcroft           John+Ascroft                 1    41    41          2
 2 Adam+Ereli              Adam+J+Ereli                 2    56    56          2
 3 Chris+Patten            CHRIS+PATTEN                 0    92    92          2
 4 Peter+Hain              PETER+HAIN                   0   159   159          2
 5 Roberto+Castelli        Robero+Castelli              1   173   173          2
 6 Shaukat+Sultan          Shaukat+Sultán               1   174   174          2
 7 Gerhard+Mayer+Vorfelder Gerhard+Mayer-Vorfel…        1   196   196          2
 8 Johannes+Rau            JOHANNES+RAU                 0   202   202          2
 9 Roland+Koch             ROLAND+KOCH                  0   215   215          2
10 Jesus+Caldera           Jesús+Caldera                1   231   231          2
11 Martin+Bartenstein      Martin+Barteinstein          1   241   241          2
12 Klaus+Zumwinkel         Klaus+Zumwinckel             1   252   252          2
13 Philip+Green            Phillip+Green                1   253   253          2
14 Umberto+Agnelli         UMBERTO+AGNELLI              0   259   259          2
15 Marco+Follini           MARCO+FOLLINI                0   284   284          2
16 Bernard+Thibault        BERNARD+THIBAULT             0   292   292          2
17 Seamus+Brennan          Séamus+Brennan               1   339   339          2</code></pre>
</div>
</div>
</section>

<section id="matching-on-cosine-distance-between-qgrams" class="title-slide slide level1 smaller center">
<h1>Matching on cosine distance between qgrams</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a>joinJRC12_cosine <span class="ot">&lt;-</span> fuzzyjoin<span class="sc">::</span><span class="fu">stringdist_inner_join</span>(<span class="at">x =</span> jrc_1, <span class="at">y =</span> jrc_2, <span class="at">distance_col =</span> <span class="st">"distance"</span>,</span>
<span id="cb50-2"><a href="#cb50-2"></a>          <span class="at">by =</span> <span class="st">"name"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>, </span>
<span id="cb50-3"><a href="#cb50-3"></a>           <span class="at">method =</span> <span class="st">"cosine"</span>,</span>
<span id="cb50-4"><a href="#cb50-4"></a>          <span class="at">q =</span> <span class="dv">1</span>,</span>
<span id="cb50-5"><a href="#cb50-5"></a>          <span class="at">max_dist =</span> <span class="fl">0.15</span>,</span>
<span id="cb50-6"><a href="#cb50-6"></a>          ) <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(name.x, name.y, distance) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(n.x, n.y, index_id.x, <span class="fu">starts_with</span>(<span class="st">"PersOrg"</span>)))</span>
<span id="cb50-7"><a href="#cb50-7"></a>joinJRC12_cosine</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 6
   name.x                  name.y                distance  id.x  id.y index_id.y
   &lt;chr&gt;                   &lt;chr&gt;                    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
 1 John+Ashcroft           John+Ascroft            0.0277    41    41          2
 2 Richard+Boucher         Rick+Boucher            0.1       46    46          2
 3 Adam+Ereli              Adam+J+Ereli            0.0551    56    56          2
 4 Chris+Patten            CHRIS+PATTEN            0         92    92          2
 5 Dan+Senor               Daniel+Senor            0.0955   123   123          2
 6 Peter+Hain              PETER+HAIN              0        159   159          2
 7 Roberto+Castelli        Robero+Castelli         0.0186   173   173          2
 8 Shaukat+Sultan          Shaukat+Sultán          0.0383   174   174          2
 9 Gerhard+Mayer+Vorfelder Gerhard+Mayer-Vorfel…   0.0165   196   196          2
10 Johannes+Rau            JOHANNES+RAU            0        202   202          2
11 Roland+Koch             ROLAND+KOCH             0        215   215          2
12 Jesus+Caldera           Jesús+Caldera           0.0526   231   231          2
13 Martin+Bartenstein      Martin+Barteinstein     0.0105   241   241          2
14 Klaus+Zumwinkel         Klaus+Zumwinckel        0.0230   252   252          2
15 Philip+Green            Phillip+Green           0.0227   253   253          2
16 Umberto+Agnelli         UMBERTO+AGNELLI         0        259   259          2
17 Thomas+Kean             Tom+Kean                0.117    274   274          2
18 Marco+Follini           MARCO+FOLLINI           0        284   284          2
19 Bernard+Thibault        BERNARD+THIBAULT        0        292   292          2
20 Seamus+Brennan          Séamus+Brennan          0.0392   339   339          2</code></pre>
</div>
</div>
</section>

<section id="matching-on-jaccard-distance" class="title-slide slide level1 smaller center">
<h1>Matching on Jaccard distance</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>joinJRC12_jaccard <span class="ot">&lt;-</span> fuzzyjoin<span class="sc">::</span><span class="fu">stringdist_inner_join</span>(<span class="at">x =</span> jrc_1, <span class="at">y =</span> jrc_2,</span>
<span id="cb52-2"><a href="#cb52-2"></a><span class="at">distance_col =</span> <span class="st">"distance"</span>,  <span class="at">by =</span> <span class="st">"name"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>, <span class="at">method =</span> <span class="st">"jaccard"</span>,</span>
<span id="cb52-3"><a href="#cb52-3"></a>          <span class="at">q =</span> <span class="dv">1</span>, <span class="at">max_dist =</span> <span class="fl">0.18</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb52-4"><a href="#cb52-4"></a>  <span class="fu">relocate</span>(name.x, name.y, distance) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(n.x, n.y, index_id.x, <span class="fu">starts_with</span>(<span class="st">"PersOrg"</span>)))</span>
<span id="cb52-5"><a href="#cb52-5"></a>joinJRC12_jaccard</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 6
   name.x                  name.y                distance  id.x  id.y index_id.y
   &lt;chr&gt;                   &lt;chr&gt;                    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
 1 John+Ashcroft           John+Ascroft            0         41    41          2
 2 Adam+Ereli              Adam+J+Ereli            0.111     56    56          2
 3 Chris+Patten            CHRIS+PATTEN            0         92    92          2
 4 Peter+Hain              PETER+HAIN              0        159   159          2
 5 Roberto+Castelli        Robero+Castelli         0        173   173          2
 6 Shaukat+Sultan          Shaukat+Sultán          0.1      174   174          2
 7 Gerhard+Mayer+Vorfelder Gerhard+Mayer-Vorfel…   0.0714   196   196          2
 8 Johannes+Rau            JOHANNES+RAU            0        202   202          2
 9 Roland+Koch             ROLAND+KOCH             0        215   215          2
10 Martin+Bartenstein      Martin+Barteinstein     0        241   241          2
11 Klaus+Zumwinkel         Klaus+Zumwinckel        0.0769   252   252          2
12 Philip+Green            Phillip+Green           0        253   253          2
13 Umberto+Agnelli         UMBERTO+AGNELLI         0        259   259          2
14 Marco+Follini           MARCO+FOLLINI           0        284   284          2
15 Bernard+Thibault        BERNARD+THIBAULT        0        292   292          2
16 Seamus+Brennan          Séamus+Brennan          0.1      339   339          2</code></pre>
</div>
</div>
<div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="12_JoiningDplyr_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="12_JoiningDplyr_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="12_JoiningDplyr_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="12_JoiningDplyr_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="12_JoiningDplyr_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="12_JoiningDplyr_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="12_JoiningDplyr_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="12_JoiningDplyr_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="12_JoiningDplyr_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="12_JoiningDplyr_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>