---
title: "Visualization exercise"
echo: true
format:
  revealjs:
    plugins: [notes]
    toc: true
    slide-number: true
    notes: true
    pdf-export: true
    css: atrium.css
    chalkboard: true
    scrollable: false
    code-block-height: 650px
    echo: true
    #output-location: slide
    preview-links: auto
  pdf:
    toc: true
    number-sections: true
    include-in-header: atrium.tex
    shift-heading-level-by: -1
  html:
    toc: true
    number-sections: true
    css: atrium.css
    embed-resources: true
---

## Examine billionaires

```{r}
library(dplyr, warn.conflicts = FALSE, quietly = TRUE)
library(ggplot2, warn.conflicts = FALSE, quietly = TRUE)
library(readr, warn.conflicts = FALSE, quietly = TRUE)
```

```{r donotrunthis}
#| echo: false
#| eval: false
# This joins several tables from Gapminder's billionaires data set 

billionaires_DailyIncome <- read_csv(file = "https://raw.githubusercontent.com/open-numbers/ddf--gapminder--billionaires/refs/heads/master/ddf--datapoints--daily_income--by--person--time.csv", show_col_types = FALSE)
billionaires_Persons <- read_csv(file = "https://raw.githubusercontent.com/open-numbers/ddf--gapminder--billionaires/refs/heads/master/ddf--entities--person.csv", show_col_types = TRUE)
countries <- read_csv(file = "https://raw.githubusercontent.com/open-numbers/ddf--gapminder--billionaires/refs/heads/master/ddf--entities--geo--country.csv", show_col_types = FALSE) %>% 
  select(c("country", "name" ,"income_groups", "main_religion_2008", "world_6region", "west_and_rest"))
colnames(billionaires_DailyIncome)
colnames(billionaires_Persons)
billionaires_df <- dplyr::inner_join(x = billionaires_DailyIncome, 
                                     y = billionaires_Persons,
                                     by = "person"
                                     )  %>% 
  select(!c("image_uri", "birth", "birth_1", "birth_2", "birth_3", "names")) %>% inner_join(y = countries, by = c("countries" = "country")) 

write_tsv(x = billionaires_df, file = "~/R_BEGINNERS_SHORT/datasets_ATRIUM/billionaires_combined.tsv", )
```

```{r}

```

## Create a report

-   a Quarto file named `<YOURLOGIN>_E_03_01_01.qmd`

## Dataset

1.  Read file `datasets_ATRIUM/billionaires_combined.tsv` and save it in a variable `billionaires_df`.

2.  Create `billionaires_2020` by filtering only year 2020.

```{r dataset-01}
#| echo: false
billionaires_df <- read_tsv(file = "~/R_BEGINNERS_SHORT/datasets_ATRIUM/billionaires_combined.tsv", show_col_types = FALSE)
```

```{r dataset-02}
#| echo: false
billionaires_2020 <- filter(billionaires_df, time == 2020) 

```

## Compare the count of males and female billionaires for each world region

Suggestion: barplot with dodged bars. But feel free to experiment and provide more than one solution inspired by the ggplot2 cheat sheet!

```{r}
#| name: compare-sexes-regions-barplot
#| echo: false
ggplot(data = billionaires_df) + 
  geom_bar(mapping = aes(x = world_6region, fill = sex), position = "dodge") + theme(axis.text.x = element_text(angle = 60, hjust = 1))
```

## sss
