---
title: "Visualization exercise"
echo: true
format:
  revealjs:
    plugins: [notes]
    toc: true
    slide-number: true
    notes: true
    pdf-export: true
    css: atrium.css
    chalkboard: true
    scrollable: false
    code-block-height: 650px
    echo: true
    #output-location: slide
    preview-links: auto
  pdf:
    toc: true
    number-sections: true
    include-in-header: atrium.tex
    shift-heading-level-by: -1
  html:
    toc: true
    number-sections: true
    css: atrium.css
    embed-resources: true
---

## Examine billionaires

```{r}
library(dplyr, warn.conflicts = FALSE, quietly = TRUE)
library(ggplot2, warn.conflicts = FALSE, quietly = TRUE)
library(readr, warn.conflicts = FALSE, quietly = TRUE)
```

```{r donotrunthis}
#| echo: false
#| eval: false
# This joins several tables from Gapminder's billionaires data set 

billionaires_DailyIncome <- read_csv(file = "https://raw.githubusercontent.com/open-numbers/ddf--gapminder--billionaires/refs/heads/master/ddf--datapoints--daily_income--by--person--time.csv", show_col_types = FALSE)
billionaires_Persons <- read_csv(file = "https://raw.githubusercontent.com/open-numbers/ddf--gapminder--billionaires/refs/heads/master/ddf--entities--person.csv", show_col_types = TRUE)
countries <- read_csv(file = "https://raw.githubusercontent.com/open-numbers/ddf--gapminder--billionaires/refs/heads/master/ddf--entities--geo--country.csv", show_col_types = FALSE) %>% 
  select(c("country", "name" ,"income_groups", "main_religion_2008", "world_6region", "west_and_rest"))
colnames(billionaires_DailyIncome)
colnames(billionaires_Persons)
billionaires_df <- dplyr::inner_join(x = billionaires_DailyIncome, 
                                     y = billionaires_Persons,
                                     by = "person"
                                     )  %>% 
  select(!c("image_uri", "birth", "birth_1", "birth_2", "birth_3", "names")) %>% inner_join(y = countries, by = c("countries" = "country")) 

write_tsv(x = billionaires_df, file = "~/R_BEGINNERS_SHORT/datasets_ATRIUM/billionaires_combined.tsv", )
```

```{r}

```

## Motivation

The purpose of this exercise is to motivate you to think about data as a trove of arguments for your imagined cause or insights in your imagined research question. This frame does not need to be very sophisticated; it's merely there to make you think and ask questions from the data and make meaningful and interpretable plots. Even if you do not see a trend, you could claim that you expected one and describe what you were expecting to see instead.

The data set lists global billionaires over a time span. You can be illustrating the consequences of a hypothetical global tax on individual continents, or demonstrate societal changes on billionaires throughout decades - whatever.

## Your file and data

-   Create a Quarto file named `<YOURLOGIN>_E_03_01_01.qmd` and save it in `my_exercise_scripts`.
-   Read file `~/R_BEGINNERS_SHORT/datasets_ATRIUM/billionaires_combined.tsv` and save it in a variable `billionaires_df`.
-   Explore the dataset and keep noting what you are looking for and what you see. At least ten plots. Some suggestions with examples follow.

## How to make a subset of the dataset

Example: Create `billionaires_2020` by filtering only year 2020.

```{r dataset-01}
billionaires_df <- read_tsv(file = "~/R_BEGINNERS_SHORT/datasets_ATRIUM/billionaires_combined.tsv", show_col_types = FALSE)
```

```{r dataset-02}
billionaires_2020 <- filter(billionaires_df, time == 2020) 

```

## Compare the count of males and female billionaires for each world region

Suggestion: barplot with dodged bars.

::: callout-tip
## Tilt axis text to make it legible

When axis labels overlap, add this code and fiddle with `angle`, `hjust` (or `vjust`):

`+ theme(axis.text.x = element_text(angle = 60, hjust = 1))`
:::

```{r}
#| name: compare-sexes-regions-barplot
#| echo: false
ggplot(data = billionaires_df) + 
  geom_bar(mapping = aes(x = world_6region, fill = sex), position = "dodge") + theme(axis.text.x = element_text(angle = 60, hjust = 1))
```

# Sex, age, and residence in 2020 

```{r}
#| echo: false
billionaires 
```

## West and rest

```{r}

```
